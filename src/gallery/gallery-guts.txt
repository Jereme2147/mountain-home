import React from "react"
import { graphql, useStaticQuery } from "gatsby"
import Img from "gatsby-image"
import variables from "../components/variables.js"
import style from "./gallery-guts.module.scss"

const GalleryGuts = ({ tag }) => {
  const data = useStaticQuery(graphql`
    query {
      allContentfulImage {
        nodes {
          id
          image {
            id
            title
            fluid(maxWidth: 600, quality: 90) {
              ...GatsbyContentfulFluid_withWebp
            }
            file {
              url
            }
            description
          }
          tag
          job
          showImage
        }
      }
    }
  `)
  const style = {
    width: "100px",
    height: "100px",
  }
  return (
    <div>
      <h2>{tag}</h2>
      {data.allContentfulImage.nodes.map(item => {
        const str = String(item.tag) // object to string
        if (str.includes(tag) && item.showImage == true) {
          return (
            <div style={style}>
              <h1>{item.tag}</h1>
              <a href={item.image.file.url} target="__BLANK">
                <Img
                  key={item.image.id}
                  fluid={item.image.fluid}
                  alt={item.image.description}
                  style={style}
                />
              </a>
            </div>
          )
        }
      })}
    </div>
  )
}

export default GalleryGuts
